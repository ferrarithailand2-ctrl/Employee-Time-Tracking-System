<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Employee Time Tracking System</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        /* New styles for interactive calendar */
        .calendar-cell { cursor: pointer; transition: background 0.2s; position: relative; }
        .calendar-cell:hover { background-color: #e3f2fd !important; }
        .calendar-cell:hover::after { content: 'Click to Edit'; position: absolute; font-size: 8px; bottom: 0; left: 0; width: 100%; text-align: center; color: #1976d2; }
        .late-time { color: #e74c3c; font-weight: bold; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Employee Time Tracking System</h1>
        
        <div class="section">
            <h2>Upload Excel File</h2>
            <div class="file-input">
                <input type="file" id="fileInput" accept=".xlsx, .xls">
            </div>
            <button id="processBtn">Process Data</button>
        </div>
        
        <div class="tabs">
            <div class="tab active" data-tab="summary">Summary</div>
            <div class="tab" data-tab="employee">By Employee</div>
            <div class="tab" data-tab="raw">Raw Data</div>
            <div class="tab" data-tab="settings">Settings</div>
        </div>
        
        <div class="tab-content active" id="summary-tab">
            <div class="controls">
                <div class="report-period">
                    <select id="reportType">
                        <option value="monthly">Monthly (26th-25th)</option>
                        <option value="yearly">Yearly</option>
                    </select>
                    <select id="monthSelect"></select>
                    <input type="number" id="yearSelect" value="2025">
                </div>
                <button id="exportSummary" class="success">Export Summary</button>
            </div>
            <table id="summaryTable" class="summary-table">
                <thead>
                    <tr>
                        <th>Name</th><th>ID</th><th>Work Days</th><th>Late Days</th><th>Total Late (Mins)</th><th>Total Late (Hours)</th>
                    </tr>
                </thead>
                <tbody id="summaryBody"></tbody>
            </table>
        </div>

        <div class="tab-content" id="employee-tab">
            <div class="controls">
                <select id="employeeDetailSelect"><option value="">-- Select Employee --</option></select>
                <div class="report-period">
                    <select id="employeeReportType">
                        <option value="monthly">Monthly (26th-25th)</option>
                        <option value="yearly">Yearly</option>
                    </select>
                    <select id="employeeMonthSelect"></select>
                    <input type="number" id="employeeYearSelect" value="2025">
                </div>
                <button id="exportEmployee" class="success">Export by Employee</button>
            </div>
            <div id="employeeDetailContent">
                <h3 id="employeeDetailName">Details</h3>
                <p><small><i>*Click on any time cell to add or edit clock-in time manually.</i></small></p>
                <div class="calendar-view">
                    <table id="employeeDailyTable">
                        <thead><tr id="dailyHeader"></tr></thead>
                        <tbody id="employeeDailyBody"></tbody>
                    </table>
                </div>
                <br>
                <h4>Monthly/Yearly Summary</h4>
                <table>
                    <thead><tr><th>Period</th><th>Work Days</th><th>Late Days</th><th>Total Late (Mins)</th><th>Total Late (Hours)</th></tr></thead>
                    <tbody id="employeeMonthlySummary"></tbody>
                </table>
            </div>
        </div>

        <div class="tab-content" id="raw-tab">
            <div class="controls">
                <select id="rawEmployeeFilter"><option value="">All Employees</option></select>
                <select id="rawMonthFilter"><option value="">All Months</option></select>
                <input type="number" id="rawYearFilter" value="2025">
                <button id="applyRawFilter" class="secondary">Filter</button>
            </div>
            <table id="rawDataTable">
                <thead><tr><th>Name</th><th>ID</th><th>Time</th><th>Date</th></tr></thead>
                <tbody id="rawDataBody"></tbody>
            </table>
        </div>

        <div class="tab-content" id="settings-tab">
            <h2>Manage Employee Schedules</h2>
            <div class="manual-entry">
                <input type="text" id="newEmpName" placeholder="Name">
                <input type="text" id="newEmpStart" placeholder="Reg Start (08:00)">
                <input type="text" id="newEmpMonday" placeholder="Mon Start (07:30)">
                <button id="saveEmpBtn" class="success">Save Schedule</button>
            </div>
            <table>
                <thead><tr><th>Name</th><th>Regular</th><th>Monday</th><th>Action</th></tr></thead>
                <tbody id="scheduleBody"></tbody>
            </table>
            
            <hr>
            
            <h3>Data Management</h3>
            
            <div class="data-management">
                <h4>Clear Employee Data</h4>
                <div class="manual-entry">
                    <select id="employeeToClear">
                        <option value="">-- Select Employee --</option>
                    </select>
                    <button onclick="clearSelectedEmployee()" class="danger">Clear Selected Employee Data</button>
                </div>
                
                <h4>Clear Month Data</h4>
                <div class="manual-entry">
                    <select id="monthToClear">
                        <option value="">-- Select Month --</option>
                    </select>
                    <input type="number" id="yearToClear" value="2025" placeholder="Year">
                    <button onclick="clearSelectedMonth()" class="danger">Clear Selected Month Data</button>
                </div>
                
                <h4>Clear All Data</h4>
                <button id="clearData" class="danger">Delete All Browser History</button>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="script.js"></script>
</body>
</html>